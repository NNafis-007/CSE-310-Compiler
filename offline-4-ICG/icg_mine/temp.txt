func_a PROC
	PUSH BP
	MOV BP, SP

	MOV AX, 7		; Line 4
	PUSH AX
	POP AX
	MOV a, AX		; Line 4
	PUSH AX
	POP AX 		; Line 4


	POP BP
	RET
func_a ENDP

foo PROC
	PUSH BP
	MOV BP, SP

	MOV AX, [BP+4]
	PUSH AX
	MOV AX, 3		; Line 8
	PUSH AX
	POP AX
	POP DX
	ADD AX, DX
	PUSH AX
	POP AX
	MOV [BP+4], AX		; Line 8
	PUSH AX
	POP AX 		; Line 8

	MOV AX, [BP+4]
	PUSH AX
	POP AX 		; Line 9
	POP BP
	RET 2
foo ENDP

bar PROC
	PUSH BP
	MOV BP, SP

	MOV AX, 4		; Line 14
	PUSH AX
	MOV AX, [BP+6]
	PUSH AX
	POP AX
	POP CX
	CWD
	MUL CX
	PUSH AX
	MOV AX, 2		; Line 14
	PUSH AX
	MOV AX, [BP+4]
	PUSH AX
	POP AX
	POP CX
	CWD
	MUL CX
	PUSH AX
	POP AX
	POP DX
	ADD AX, DX
	PUSH AX
	POP AX
	MOV c, AX		; Line 14
	PUSH AX
	POP AX 		; Line 14

	MOV AX, c
	PUSH AX
	POP AX 		; Line 15
	POP BP
	RET 4
bar ENDP

main PROC
	MOV AX, @DATA
	MOV DS, AX
	PUSH BP
	MOV BP, SP

	SUB SP , 2
	SUB SP , 2
	SUB SP , 2
	SUB SP , 2
	MOV AX, 5		; Line 22
	PUSH AX
	POP AX
	MOV [BP-2], AX		; Line 22
	PUSH AX
	POP AX 		; Line 22

	MOV AX, 6		; Line 23
	PUSH AX
	POP AX
	MOV [BP-4], AX		; Line 23
	PUSH AX
	POP AX 		; Line 23

	CALL func_a		; Line 25
	PUSH AX
	POP AX 		; Line 25

	MOV AX, a		; Line 26
	CALL print_output
	CALL new_line

	MOV AX, [BP-2]
	PUSH AX
	CALL foo		; Line 28
	PUSH AX
	POP AX
	MOV [BP-6], AX		; Line 28
	PUSH AX
	POP AX 		; Line 28

	MOV AX, [BP-6]		; Line 29
	CALL print_output
	CALL new_line

	MOV AX, [BP-2]
	PUSH AX
	MOV AX, [BP-4]
	PUSH AX
	CALL bar		; Line 31
	PUSH AX
	POP AX
	MOV [BP-8], AX		; Line 31
	PUSH AX
	POP AX 		; Line 31

	MOV AX, [BP-8]		; Line 32
	CALL print_output
	CALL new_line

	MOV AX, 6		; Line 34
	PUSH AX
	MOV AX, [BP-2]
	PUSH AX
	MOV AX, [BP-4]
	PUSH AX
	CALL bar		; Line 34
	PUSH AX
	POP AX
	POP CX
	CWD
	MUL CX
	PUSH AX
	MOV AX, 2		; Line 34
	PUSH AX
	POP AX
	POP DX
	ADD AX, DX
	PUSH AX
	MOV AX, 3		; Line 34
	PUSH AX
	MOV AX, [BP-2]
	PUSH AX
	CALL foo		; Line 34
	PUSH AX
	POP AX
	POP CX
	CWD
	MUL CX
	PUSH AX
	POP AX
	POP DX
	XCHG DX, AX
	SUB AX, DX
	PUSH AX
	POP AX
	MOV [BP-4], AX		; Line 34
	PUSH AX
	POP AX 		; Line 34

	MOV AX, [BP-4]		; Line 35
	CALL print_output
	CALL new_line

	MOV AX, 0		; Line 38
	PUSH AX
	POP AX 		; Line 38

	POP BP
	MOV AX, 4Ch
	INT 21h
main ENDP
